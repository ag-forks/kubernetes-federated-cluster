= Setup k8s cluster

. Create a k8s cluster
+
```
export KOPS_STATE_STORE=s3://kubernetes-aws-io
kops create cluster \
  cluster.k8s.local \
  --master-count=3 \
  --master-zones us-east-1a,us-east-1b \
  --zones us-east-1a,us-east-1b \
  --node-count=3 \
  --yes
```
+
. Validate:
+
```
kops validate cluster --name=cluster.k8s.local
Validating cluster cluster.k8s.local

INSTANCE GROUPS
NAME			ROLE	MACHINETYPE	MIN	MAX	SUBNETS
master-us-east-1a-1	Master	m3.medium	1	1	us-east-1a
master-us-east-1a-2	Master	m3.medium	1	1	us-east-1a
master-us-east-1b-1	Master	m3.medium	1	1	us-east-1b
nodes			Node	t2.medium	3	3	us-east-1a,us-east-1b

NODE STATUS
NAME				ROLE	READY
ip-172-20-39-245.ec2.internal	node	True
ip-172-20-48-97.ec2.internal	master	True
ip-172-20-51-1.ec2.internal	node	True
ip-172-20-61-161.ec2.internal	master	True
ip-172-20-69-95.ec2.internal	node	True
ip-172-20-73-106.ec2.internal	master	True
```
+
. Create another k8s cluster
+
```
kops create cluster \
  cluster2.k8s.local \
  --master-count=3 \
  --master-zones us-west-1b,us-west-1c \
  --zones us-west-1b,us-west-1c \
  --node-count=3 \
  --yes
```
+
. Validate
+
```
kops validate cluster --name=cluster2.k8s.local
Validating cluster cluster2.k8s.local

INSTANCE GROUPS
NAME			ROLE	MACHINETYPE	MIN	MAX	SUBNETS
master-us-west-1b-1	Master	m3.medium	1	1	us-west-1b
master-us-west-1b-2	Master	m3.medium	1	1	us-west-1b
master-us-west-1c-1	Master	m3.medium	1	1	us-west-1c
nodes			Node	t2.medium	3	3	us-west-1b,us-west-1c

NODE STATUS
NAME						ROLE	READY
ip-172-20-36-173.us-west-1.compute.internal	master	True
ip-172-20-40-38.us-west-1.compute.internal	master	True
ip-172-20-59-86.us-west-1.compute.internal	node	True
ip-172-20-62-88.us-west-1.compute.internal	node	True
ip-172-20-81-69.us-west-1.compute.internal	master	True
ip-172-20-92-246.us-west-1.compute.internal	node	True

Your cluster cluster2.k8s.local is ready
```

= Setup kubefed

. Download k8s client binary:
+
```
curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/kubernetes-client-darwin-amd64.tar.gz
tar xzvf kubernetes-client-darwin-amd64.tar.gz
```
+
. Check context:
+
```
kubectl config get-contexts
CURRENT   NAME                                      CLUSTER                                   AUTHINFO                                  NAMESPACE
          tectonic                                  cluster                                   tectonic-oidc                             
          cluster.k8s.local                         cluster.k8s.local                         cluster.k8s.local                         
*         cluster2.k8s.local                        cluster2.k8s.local                        cluster2.k8s.local                        
```
+
